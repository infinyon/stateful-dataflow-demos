apiVersion: 0.6.0

meta:
  name: slack-types
  version: 0.0.1
  namespace: infinyon

types:
  slack-event:
    type: object
    properties:
      blocks:
        type: list
        type-name: slack-event-blocks
        items:
          type: enum
          type-name: slack-event-untagged
          tagging: untagged
          oneOf:
            text-section:
              type: text-section
            fields-section:
              type: fields-section
  text-section:
    type: object
    properties:
      text:
        type: text-object
      type:
        type: enum
        type-name: text-section-type
        oneOf:
          section:
            type: null
  fields-section:
    type: object
    properties:
      fields:
        type: list
        type-name: fields-section-fields
        items:
          type: text-object
      type:
        type: enum
        type-name: fields-section-type
        oneOf:
          section:
            type: null
  text-object:
    type: object
    properties:
      text:
        type: string
      type:
        type: enum
        type-name: text-object-type
        oneOf:
          mrkdwn:
            type: null
            
functions:
  ## Test API to ensure proper decoding/enocoding of Slack Types
  test-event:
    operator: map
    inputs:
      - name: sev
        type: slack-event
    output:
      type: slack-event